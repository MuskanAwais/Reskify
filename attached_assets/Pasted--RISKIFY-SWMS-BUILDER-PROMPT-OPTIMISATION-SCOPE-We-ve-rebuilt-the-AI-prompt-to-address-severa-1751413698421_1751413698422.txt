üìå RISKIFY SWMS BUILDER ‚Äì PROMPT OPTIMISATION SCOPE

We‚Äôve rebuilt the AI prompt to address several key issues in the current generator. This scope outlines all optimisations now required for reliable, regulation-aligned Safe Work Method Statement generation:
 
‚úÖ 1. TRADE BOUNDARY ENFORCEMENT (CRITICAL)

Problem: The model was including tasks from other trades or general construction duties.

Fix:
‚Ä¢	Enforce a "validateTradeScope" logic block:

"validateTradeScope": {
  "isTaskWithinTradeScope": "YES" | "NO",
  "reasonIfNo": "Explain which trade this task belongs to"
}
   
‚Ä¢	Model must reject non-trade tasks rather than try to re-assign them.
‚Ä¢	Add system prompt clause:

‚ÄúYou must only generate tasks the specified trade performs with their own tools and licences. Reject anything outside this boundary.‚Äù


‚úÖ 2. SPECIFIC HAZARD IDENTIFICATION

Problem: Hazards were too generic.

Fix:
‚Ä¢	Each hazard must include:
o	Cause agent (e.g. ‚Äúangle grinder blade fracture‚Äù)
o	Environmental condition (e.g. ‚Äútight subfloor‚Äù, ‚Äúwet scaffold planks‚Äù)
o	Consequence (e.g. ‚Äúeye penetration‚Äù, ‚Äúelectric shock‚Äù)
‚Ä¢	Prompt clause:

‚ÄúHazards must be described using: (1) the specific cause agent, (2) task or environment context, and (3) likely consequence.‚Äù
 
‚úÖ 3. HIGH-RISK CONSTRUCTION WORK (HRCW) CATEGORY INTEGRATION

Fix:
‚Ä¢	Prompt accepts input like:
"hrcwCategories": [1, 2, 6, 10]

‚Ä¢	Tasks that trigger any selected category must:
o	Explicitly reference the HRCW number
o	Include controls that mention permits or risk control forms from the Risk Register
(e.g. "S030408 Hot Works Permit", "Q030428 Confined Space Permit")
 
 
‚úÖ 4. DETAILED CONTROL MEASURES (HIERARCHY STRUCTURE)

Problem: Controls were vague or mis-prioritised.

Fix:
‚Ä¢	Controls must now be structured by Hierarchy of Controls:
"controlMeasures": {
  "elimination": "...",
  "substitution": "...",
  "isolation": "...",
  "engineering": "...",
  "administrative": "...",
  "ppe": "..."
}

‚Ä¢	Prompt clause:

‚ÄúYou must apply the hierarchy of controls. Do not default to PPE unless all higher levels are not reasonably practicable.‚Äù
 
‚úÖ 5. AUSTRALIAN COMPLIANCE ACCURACY

Fix:
‚Ä¢	Every task must include this structure:
"referencedLegislation": [
  "NSW WHS Reg 2017 s217",
  "AS 2550.1",
  "Falls CoP Section 4.2"
]

‚Ä¢	Source clauses from:
o	NSW WHS Regulation 2017
o	Model Codes of Practice (e.g. Falls CoP, Excavation CoP)
o	Relevant Australian Standards (e.g. AS 4576 Scaffold, AS 3012 Electrical)
‚Ä¢	‚ùì OPEN ITEM FOR REPLIT
‚Ä¢	
‚Ä¢	Are there any other fields, schema constraints, or ingestion requirements we should add to this prompt structure to ensure seamless integration with the Riskify ingestion engine?
